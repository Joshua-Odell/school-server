CREATE TYPE behavior_type AS ENUM (
    'Physcial Aggression/Fighting',
    'Unsafe Location',
    'Self-injurious Behavior',
    'Use/Possession of weapon',
    'Possession of Drugs',
    'Other (described in narrative)'
);

CREATE TABLE incident (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    student_marss INTEGER REFERENCES student(marss) NOT NULL,
    staff_submitter TEXT REFERENCES staff(staff_name) NOT NULL,
    school INTEGER REFERENCES school(id) NOT NULL,
    date  DATE NOT NULL,
    day_of_the_week TEXT NOT NULL,
    behavior_type behavior_type [],
    narrative TEXT NOT NULL,
    administration BOOLEAN NOT NULL,
    parent BOOLEAN NOT NULL,
    parent_notification_time TIME,
    parent_notification_date DATE,
    parent_problem_solving BOOLEAN NOT NULL,
    parent_right BOOLEAN NOT NULL,
    iep_meeting BOOLEAN NOT NULL,
    student_debriefing BOOLEAN NOT NULL,
    staff_debriefing BOOLEAN NOT NULL,
    seclusion BOOLEAN NOT NULL,
    reasonable_force TEXT NOT NULL,
    student_injury BOOLEAN NOT NULL,
    staff_injury BOOLEAN NOT NULL,
    law_enforcement BOOLEAN NOT NULL,
    room_location TEXT NOT NULL,
    hold_1 INTEGER REFERENCES holds(id),
    hold_2 INTEGER REFERENCES holds(id),
    hold_3 INTEGER REFERENCES holds(id),
    hold_4 INTEGER REFERENCES holds(id),
    hold_5 INTEGER REFERENCES holds(id),
    antecedent TEXT NOT NULL,
    contributing_variables TEXT NOT NULL,
    people_involved TEXT[],
    major_disruption TEXT NOT NULL,
    approved BOOLEAN DEFAULT false,
    approver INTEGER REFERENCES staff(id) NOT NULL,
    approver_comments TEXT
);